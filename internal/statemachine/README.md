State machine implementation of the vendingmachine prototype

`Caution`: this is not production ready and it is not recommended to use